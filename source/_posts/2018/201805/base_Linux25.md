---
title: Linux_基础 (25)
date: 2018-05-14
tags: Linux
toc: true
---

### 文件系统的简单操作
    如何查询整体文件系统的总容量与每个目录所占的容量

<!-- more -->

#### 磁盘与目录的容量
- df
    * 命令格式
        * df [选项] [文件]
    * 命令功能
        * 显示指定磁盘文件的可用空间。如果没有文件名被指定，则所有当前被挂载的文件系统的可用空间将被显示。默认情况下，磁盘空间将以 1KB 为单位进行显示，除非环境变量 POSIXLY_CORRECT 被指定，那样将以512字节为单位进行显示
    * 命令参数
        * 必要参数
            * -a 全部文件系统列表
            * -h 方便阅读方式显示
            * -H 等于“-h”，但是计算式，1K=1000，而不是1K=1024
            * -i 显示inode信息
            * -k 区块为1024字节
            * -l 只显示本地文件系统
            * -m 区块为1048576字节
            * --no-sync 忽略 sync 命令
            * -P 输出格式为POSIX
            * --sync 在取得磁盘信息前，先执行sync命令
            * -T 文件系统类型
        * 选择参数
            * --block-size=<区块大小> 指定区块大小
            * -t<文件系统类型> 只显示选定文件系统的磁盘信息
            * -x<文件系统类型> 不显示选定文件系统的磁盘信息
            * --help 显示帮助信息
            * --version 显示版本信息
    * 命令实例
        ```bash
            显示磁盘使用情况
            df
            文件系统           1K-块     已用      可用 已用% 挂载点
            devtmpfs         4071804        0   4071804    0% /dev
            tmpfs            4083704        0   4083704    0% /dev/shm
            tmpfs            4083704   261596   3822108    7% /run
            tmpfs            4083704        0   4083704    0% /sys/fs/cgroup
            /dev/sda3       52403200 30931344  21471856   60% /
            /dev/sda2      915114424 33972628 881141796    4% /data
            /dev/sda1         201388   153048     48340   76% /boot
            tmpfs             816744        0    816744    0% /run/user/1002
            tmpfs             816744        0    816744    0% /run/user/1010
            tmpfs             816744        0    816744    0% /run/user/1004
            tmpfs             816744        0    816744    0% /run/user/0
            tmpfs             816744        0    816744    0% /run/user/1008

            文件系统[Filesysytem] 代表该文件系统是在哪个partition
            1k-块[1k-blocks] 说明这一列的数字单位是1KB,可用-h或-m来改变
            已用[Used] 用掉的磁盘空间
            可用[Available] 剩下的磁盘空间大小
            已用[Use%] 磁盘的使用率
            挂载点[Mounted on] 磁盘挂载的目录所在
        ```
- du
    * 命令格式
        * du [选项][文件]
    * 命令功能
        * 显示每个文件和目录的磁盘使用空间
    * 命令参数 
        * -a或-all  显示目录中个别文件的大小。   
        * -b或-bytes  显示目录或文件大小时，以byte为单位。   
        * -c或--total  除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。 
        * -k或--kilobytes  以KB(1024bytes)为单位输出。
        * -m或--megabytes  以MB为单位输出。   
        * -s或--summarize  仅显示总计，只列出最后加总的值。
        * -h或--human-readable  以K，M，G为单位，提高信息的可读性。
        * -x或--one-file-xystem  以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。 
        * -L<符号链接>或--dereference<符号链接> 显示选项中所指定符号链接的源文件大小。   
        * -S或--separate-dirs   显示个别目录的大小时，并不含其子目录的大小。 
        * -X<文件>或--exclude-from=<文件>  在<文件>指定目录或文件。   
        * --exclude=<目录或文件>         略过指定的目录或文件。    
        * -D或--dereference-args   显示指定符号链接的源文件大小。   
        * -H或--si  与-h参数相同，但是K，M，G是以1000为换算单位。   
        * -l或--count-links   重复计算硬件链接的文件。 
    * 命令实例
        ```bash
            du -ah
            4.0K	./.bash_logout
            4.0K	./.bash_profile
            4.0K	./.bashrc
            4.0K	./.bash_history
            4.0K	./20180514/index.php
            4.0K	./20180514
            4.0K	./.viminfo
            24K	.
        ```

