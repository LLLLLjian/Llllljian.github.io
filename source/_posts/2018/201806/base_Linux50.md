---
title: Linux_基础 (50)
date: 2018-06-12
tags: Linux
toc: true
---

### 进程管理
    触发任何一个事件时,系统都会将他定义成为一个进程,并且给予这个进行一个ID,称为PID.
    同时依据启发这个进行的用户与相关属性关系,给予这个PID一组有效的权限设定

<!-- more -->

#### 进程定义
- 进程是一个独立的可调度的活动
- 进程是一个抽象实体,当它执行某个任务时,要分配和释放各种资源
- 进程是可以并行执行的计算单位
- 进程是一个具有一定独立功能的程序关于某个数据集合的一次运行活动
- 进程是一个程序的一次执行过程,同时也是资源分配的最小单元
- 进程和程序的区别
    * 程序 : 静态的,是一些保存在磁盘上的指令的有序集合,没有任何执行的概念
    * 进程 : 是一个动态的概念,是程序执行的过程,可以说进程就是一个正在执行的程序.程序被触发后,执行者的权限与属性、程序的程序代码与所需数据等都会被加载到内存中,操作系统并给予这个内存内的单元一个标识符.

#### 进程分类
- 交互进程 : 由shell启动的进程。交互进程既可以在前台运行，也可以在后台运行
- 批处理进程 : 这种进程和终端没有联系，它是被提交到一个队列中的进程序列
- 守护进程 : 又称监控进程，也就是通常说的Daemon进程，是Linux中的后台服务进程

#### 进程控制块
- 标识号
    * 每个进程都有一个进程标识号（PID）和一个父进程标识号（PPID），其中PID唯一标识一个进程。
    * 一个进程还有自己的用户标识号(UID)和组标识号(GID)，系统通过这两个标识号判断进程对文件或设备的访问权
    ```bash
        [liujian@node129 20180612 20:31:55 #40]$ cat 2.sh
        #!/bin/bash
        #########################################################################
        # 文件名: 2.sh
        # 作者: llllljian
        # 邮箱: 18634678077@163.com
        # 创建时间: 2018年06月12日 星期四 20时21分44秒
        # 更新时间: 2018年06月12日 星期四 20时31分37秒
        # 注释: 标识号 
        #########################################################################

        echo "PID of this script: $$"
        echo "PPID of this script: $PPID"
        echo "UID of this script: $UID"
        echo "GID of this script: `id -G`"

        [liujian@node129 20180612 20:32:01 #41]$ sh 2.sh
        PID of this script: 8979
        PPID of this script: 8689
        UID of this script: 1008
        GID of this script: 1008
    ```
- 状态信息
    * 执行态
        * R (running)
        * 该进程正在运行，即进程正在占用CPU。
        * 正在运行或在运行队列中等待
    * 就绪态
        * 进程已经具备执行的一切条件，正在等待分配CPU的处理时间片。
        * 休眠中, 受阻, 在等待某个条件的形成或接受到信号
    * 等待态
        * 进程正在等待某个事件或某个资源。
        * 等待态又分为可中断等待和不可中断等待两种。
        * 可中断的等待进程可被信号中断，而不可中断的等待进程不能被信号中断。
        * 收到信号不唤醒和不可运行, 进程必须等待直到有中断发生
    * 停止状态
        * T (stopped)
        * 当进程收到一个SIGSTOP信号后，便由运行态进入停止状态，当收到SIGCONT信号时又会恢复运行态，该状态主要用于调试。
        * 进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行
    * 僵死状态（终止状态）
        * Z (zombie)
        * 进程已终止，但其task_struct 结构仍在内存中。顾名思义，处于这种状态的进程实际是死进程。
        * 进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放
- 调度信息
    * 调度器根据这些信息判定系统中哪个进程最迫切需要运行。
-  有关进程间通讯的信息
    * 系统利用这一信息实现进程间的通讯
- 进程与其他进程之间的关系信息
- 时间和定时器信息
- 文件系统信息
- 虚拟内存与物理内存相关信息
- 和进程相关的上下文信息


“S (sleeping)”——睡眠状态（做事情，进程在等待事件完成，可以自己或其他程序唤醒也叫做可中断睡眠） 
“D (disk sleep)”——磁盘睡眠状态（不会因为任何命令/指令终止，保证数据完整性，只能关机重启，也叫不可中断睡眠） 
“T (stopped)”——暂停状态(什么事情也不做) 
“t (tracing stop)”—— 
“X (dead)”——死亡状态 

D 无法中断的休眠状态（通常 IO 的进程）；
S 处于休眠状态；
T 停止或被追踪；
W 进入内存交换  （从内核2.6开始无效）；
X 死掉的进程   （基本很少見）；