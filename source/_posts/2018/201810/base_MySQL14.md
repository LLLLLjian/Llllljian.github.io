---
title: MySQL_基础 (14)
date: 2018-10-30
tags: MySQL
toc: true
---

### MySQL查询缓存
    MySQL查询缓存保存查询返回的完整结果.当查询命中该缓存,MySQL会立即返回结果,跳过了解析、优化和执行过程
    查询缓存系统会跟踪查询中涉及的每个表,如果这些表发生变化,那么和这个表相关的所有缓存数据都将失效

<!-- more -->

#### 如何判断缓存命中
    如果查询语句中包含任何的不确定函数,那么在查询缓存中是不可能找到缓存结果的
    当判断缓存是否命中时,MySQL不会解析、正规化或者参数化查询语句,而是直接使用SQL语句和客户端发送过来的其它原始信息.任何字符上的不同[例如空格、注释]都会导致缓存的不命中

#### 查询缓存如何使用内存
    查询缓存是完全储存在内存中的

#### 什么情况下查询缓存能发挥作用
     缓存和失效都会带来额外的消耗,所以只有当缓存带来的资源节约大于其本身的资源消耗时才会给系统带来性能提升
- 缓存未命中的原因
    * 查询语句无法被缓存,可能是因为查询中包含一个不确定的函数(如CURRENT_DATE)或者查询结果太大而无法被缓存,这都会导致状态值Qcache_not_cached增加
    * MySQL从未处理这个查询,所以结果没有被缓存
    * 由于查询缓存的内存用完或者数据表被修改导致缓存失效
    * 导致缓存失效的操作太多


