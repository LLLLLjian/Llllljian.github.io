---
title: MySQL_基础 (19)
date: 2018-11-07
tags: MySQL
toc: true
---

### SQL查询
    突然觉得应该系统地再去学一遍MySQL,从零开始.

<!-- more -->

#### 单表查询
- 查询所有字段
    * 在SELECT语句中使用星号“”通配符查询所有字段
- 查询指定字段
    * 不同字段之间用逗号隔开
- 查询指定记录
    * SELECT 字段名1,字段名2,…,字段名n FROM 表名WHERE 查询条件
- 带IN关键字的查询
    * 查询满足指定范围内的条件的记录,使用IN操作符,将所有检索条件用括号括起来,检索条件用逗号分隔开,只要满足条件范围内的一个值即为匹配项
- 带BETWEEN AND的范围查询
    * 包括边界值
- 带LIKE的字符匹配查询
    * 百分号通配符‘%’,匹配任意长度的字符,甚至包括零字符
    * 下划线通配符‘_’,一次只能匹配任意一个字符
- 查询空值
    * 使用IS NULL子句,可以查询某字段内容为空记录
- 带AND的多条件查询
    * 使用AND连接两个甚至多个查询条件,多个条件表达式之间用AND分开
- 带OR的多条件查询
    * OR操作符,表示只需要满足其中一个条件的记录即可返回
- 查询结果不重复
    * 在SELECT语句中可以使用DISTINCE关键字指示MySQL消除重复的记录值
- 用LIMIT限制查询结果的数量
    * LIMIT关键字可以返回指定位置的记录.
    * LIMIT [位置偏移量,] 行数
- 合并查询结果
    * 利用UNION关键字,可以给出多条SELECT语句,并将它们的结果组合成单个结果集
    * 要求第一个SQL语句返回的列和第二条返回的列数相同
- 为表和字段取别名
    * 列名 [AS] 列别名
    * 表名 [AS] 表别名

#### 多表连接查询
- 内连接查询
    * INNER JOIN
    * 比较运算符根据每个表共有的列的值匹配两个表中的行,并列出表中与连接条件相匹配的数据行,组合成新的记录.在内连接查询中,只有满足条件的记录才能出现在结果关系中
- 外连接查询
    * 左外连接(LEFT OUTER JOIN)
        * 左外连接还返回左表中不符合连接条件单符合查询条件的数据行
    * 右外连接(RIGHT OUTER JOIN)
        * 右外连接还返回右表中不符合连接条件单符合查询条件的数据行
    * 全外连接(FULL OUTER JOIN)
        * 全外连接还返回左表中不符合连接条件单符合查询条件的数据行,并且还返回右表中不符合连接条件单符合查询条件的数据行
        * 全外=左外 UNION 右外
- 交叉连接
    * 交叉连接返回左表中的所有行,左表中的每一行与右表中的所有行组合.交叉连接有显式的和隐式的,不带ON子句,返回的是两表的乘积,也叫笛卡尔积
- SQL查询的原理
    * 单表查询
        * 根据WHERE条件过滤表中的记录,形成中间表；然后根据SELECT的选择列选择相应的列进行返回最终结果.
    * 两表连接查询
        * 对两表求积(笛卡尔积)并用ON条件和连接连接类型进行过滤形成中间表；然后根据WHERE条件过滤中间表的记录,并根据SELECT指定的列返回查询结果
    * 多表连接查询
        * 先对第一个和第二个表按照两表连接做查询,然后用查询结果和第三个表做连接查询,以此类推,直到所有的表都连接上为止,最终形成一个中间的结果表,然后根据WHERE条件过滤中间表的记录,并根据SELECT指定的列返回查询结果
- 过滤条件
    * ON条件
        * 过滤两个连接表笛卡尔积形成中间表的约束条件.
    * WHERE条件
        * 在有ON条件的SELECT语句中是过滤中间表的约束条件

#### 对查询结果排序
- 单列排序
    * ORDER BY 字段
    * 默认ASC升序,DESC降序
- 多列排序
    * ORDER BY 字段1 排序方式, 字段2 排序方式
    * 默认ASC升序,DESC降序

#### 分组查询
- Where子句
    * 从数据源去掉不符合搜索条件的数据
- GROUP BY子句
    * 分组,使用统计函数(聚合函数)为每组计算统计值
- HAVING子句
    * 在分好的组中去掉每组中不符合条件的数据行

