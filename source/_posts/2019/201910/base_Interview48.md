---
title: Interview_总结 (48)
date: 2019-10-31
tags: Interview
toc: true
---

### 笔试总结
    列一下你的笔试题 

<!-- more -->

#### 问题1
- Q
    * HTTP Keep-Alive的作用
- A
    * 作用
        * Keep-Alive: 使客户端到服务器端的连接持续有效, 当出现对服务器的后继请求时, Keep-Alive功能避免了建立或者重新建立连接.Web服务器, 基本上都支持HTTP Keep-Alive.
    * 缺点
        * 对于提供静态内容的网站来说, 这个功能通常很有用.但是, 对于负担较重的网站来说, 虽然为客户保留打开的连 接有一定的好处, 但它同样影响了性能, 因为在处理暂停期间, 本来可以释放的资源仍旧被占用.当Web服务器和应用服务器在同一台机器上运行时, Keep- Alive功能对资源利用的影响尤其突出.
    * 解决
        * Keep-Alive: timeout=5, max=100; timeout: 过期时间5秒(对应httpd.conf里的参数是: KeepAliveTimeout), max是最多一百次请求, 强制断掉连接.就是在timeout时间内又有新的连接过来, 同时max会自动减1, 直到为0, 强制断掉.

#### 问题2
- Q
    * PHP中几个输出函数echo, print(), print_r(), sprintf(), var_dump()的区别
- A
    * echo
        * 是语句不是函数, 没有返回值, 可输出多个变量值, 不需要圆括号.不能输出数组和对象, 只能打印简单类型(如int,string).
    * print
        * 是语句不是函数, 有返回值 1 , 只能输出一个变量, 不需要圆括号.不能输出数组和对象, 只能打印简单类型(如int,string).
    * print_r
        * 是函数, 可以打印复合类型, 例如: stirng、int、float、array、object等, 输出array时会用结构表示, 而且可以通过print_r($str,true)来使print_r不输出而返回print_r处理后的值
    * printf
        * 是函数, 有返回值, 返回值是打印内容的长度, 把文字格式化以后输出(参看C语言)
    * sprintf
        * 是函数, 跟printf相似, 但不打印, 而是返回格式化后的文字(该函数把格式化的字符串写写入一个变量中, 而不是输出来), 其他的与printf一样
    * var_dump()
        * 函数, 输出变量的内容、类型或字符串的内容、类型、长度.常用来调试

#### 问题3
- Q
    * 不用新变量直接交换现有两个变量的值
- A
    ```php
        // func1
        list($a, $b) = array($b, $a);

        // func2
        $a = $a . $b;
        $b = strlen( $b );
        $b = substr( $a, 0, (strlen($a) – $b ) );
        $a = substr( $a, strlen($b) );

        // func3
        $a = $b.','.$a ;
        $a = explode(',', $a);
        $b = $a[1];
        $a = $a[0];

        // func4
        $a = $a + $b;
        $b = $a – $b;
        $a = $a – $b;

        // func5
        $a = array($a,$b);
        $b = $a[0];
        $a = $a[1];
    ```

#### 问题4
- Q
    * 写个函数来解决多线程同时读写一个文件的问题
- A
    ```php
        <?php
            $fp = fopen("/tmp/lock.txt","w+");
            if (flock($fp, LOCK_EX)) {// 进行排它型锁定
                fwrite($fp,"Write something here\n");
                flock($fp, LOCK_UN);// 释放锁定
            } else {
                echo "Couldn't lock the file !";
            }
            fclose($fp);
       ?>
    ```

#### 问题5
- Q
    * php魔术方法与魔术常量
- A
    * 类方法
        * \_\_construct() : 具有构造函数的类会在每次创建新对象时先调用此方法, 适合在使用对象之前做一些初始化工作.如果子类中定义了构造函数则不会隐式调用其父类的构造函数.要执行父类的构造函数, 需要在子类的构造函数中调用 parent::\_\_construct().如果子类没有定义构造函数则会如同一个普通的类方法一样从父类继承.
        * \_\_destruct() : 析构函数会在到某个对象的所有引用都被删除或者当对象被显式销毁时执行.
    * 方法重载
        * \_\_call() : 在对象中调用一个不可访问方法时, \_\_call(); 方法会被调用.
        * \_\_callStatic() : 用静态方式中调用一个不可访问方法时, \_\_callStatic(); 方法会被调用.
    * 属性重载(只对类中私有受保护的成员属性有效)
        * \_\_get() : 读取不可访问属性的值时, \_\_get() 会被调用.
        * \_\_set() : 在给不可访问属性赋值时, \_\_set() 会被调用.
        * \_\_isset() : 当对不可访问属性调用 isset() 或 empty() 时, \_\_isset() 会被调用.
        * \_\_unset() : 当对不可访问属性调用 unset() 时, \_\_unset() 会被调用.
    * 序列化相关
        * \_\_sleep() : 序列化时调用, serialize() 函数会检查类中是否存在该魔术方法.如果存在, 该方法会先被调用, 然后才执行序列化操作.
        * \_\_wakeup() : unserialize() 会检查是否存在一个 \_\_wakeup() 方法.如果存在, 则会先调用该方法, 用在反序列化操作中, 例如重新建立数据库连接, 或执行其它初始化操作
    * 操作类和对象方法: 
        * \_\_toString() : 方法用于一个类被当成字符串时调用, 例如把一个类当做字符串进行输出
        * \_\_invoke() : 当尝试以调用函数的方式调用一个对象时, \_\_invoke() 方法会被自动调用.
        * \_\_set_state() : 当调用 var_export() 导出类时, 此静态 方法会被调用. 本方法的唯一参数是一个数组
        * \_\_clone() : 当复制完成时, 如果定义了 \_\_clone() 方法, 则新创建的对象(复制生成的对象)中的 \_\_clone() 方法会被调用, 可用于修改属性的值.
        * \_\_autoload() : 该方法可以自动实例化需要的类.当程序要用一个类但没有被实例化时, 改方法在指定路径下查找和该类名称相同的文件.否则报错.
        * \_\_debugInfo() : php5.6增加的特性, var_dump()一个类时触发, 返回一个包含对象属性的数组
    * 常量
        * \_\_LINK__ : 文件中的当前行号.
        * \_\_FILE__ : 文件的完整路径和文件名.如果用在被包含文件中, 则返回被包含的文件名.
        * \_\_DIR__ : 文件所在的目录.如果用在被包括文件中, 则返回被包括的文件所在的目录, 它等价于 dirname(\_\_FILE__).
        * \_\_FUNCTION__ : 函数名称.自 PHP 5 起本常量返回该函数被定义时的名字(区分大小写).在 PHP 4 中该值总是小写字母的.
        * \_\_CLASS__ : 类的名称.自 PHP 5 起本常量返回该类被定义时的名字(区分大小写).在 PHP 4 中该值总是小写字母的.
        * \_\_METHOD__ : 类的方法名(PHP 5.0.0 新加).返回该方法被定义时的名字(区分大小写).
        * \_\_NAMESPACE__ : 当前命名空间的名称(大小写敏感).这个常量是在编译时定义的(PHP 5.3.0 新增)
