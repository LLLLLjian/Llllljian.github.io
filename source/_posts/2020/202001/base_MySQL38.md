---
title: MySQL_基础 (38)
date: 2020-01-15
tags: 
    - MySQL 
    - Interview
toc: true
---

### 数据库知识点汇总
    事务

<!-- more -->

#### 什么是事务
> 事务是对数据库中一系列操作进行统一的回滚或者提交的操作, 主要用来保证数据的完整性和一致性

#### 事务四大特性
- 原子性(Atomicity)
    * 原子性是指事务包含的所有操作要么全部成功, 要么全部失败回滚, 因此事务的操作如果成功就必须要完全应用到数据库, 如果操作失败则不能对数据库有任何影响
- 一致性(Consistency)
    * 事务开始前和结束后, 数据库的完整性约束没有被破坏.比如A向B转账, 不可能A扣了钱, B却没收到
- 隔离性(Isolation)
    * 隔离性是当多个用户并发访问数据库时, 比如操作同一张表时, 数据库为每一个用户开启的事务, 不能被其他事务的操作所干扰, 多个并发事务之间要相互隔离.同一时间, 只允许一个事务请求同一数据, 不同的事务之间彼此没有任何干扰.比如A正在从一张银行卡中取钱, 在A取钱的过程结束前, B不能向这张卡转账
- 持久性(Durability)
    * 持久性是指一个事务一旦被提交了, 那么对数据库中的数据的改变就是永久性的, 即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作

#### 事务的并发?事务隔离级别, 每个级别会引发什么问题
- 事务的并发
    1. 脏读: 事务A读取了事务B更新的数据, 然后B回滚操作, 那么A读取到的数据是脏数据
    2. 不可重复读: 事务 A 多次读取同一数据, 事务 B 在事务A多次读取的过程中, 对数据作了更新并提交, 导致事务A多次读取同一数据时, 结果因此本事务先后两次读到的数据结果会不一致
    3. 幻读: 幻读解决了不重复读, 保证了同一个事务里, 查询的结果都是事务开始时的状态(一致性)
    4. 小结: 不可重复读的和幻读很容易混淆, 不可重复读侧重于修改, 幻读侧重于新增或删除.解决不可重复读的问题只需锁住满足条件的行, 解决幻读需要锁表
- 事务隔离级别
    1. 读未提交: 另一个事务修改了数据, 但尚未提交, 而本事务中的SELECT会读到这些未被提交的数据脏读
    2. 不可重复读: 事务 A 多次读取同一数据, 事务 B 在事务A多次读取的过程中, 对数据作了更新并提交, 导致事务A多次读取同一数据时, 结果因此本事务先后两次读到的数据结果会不一致
    3. 可重复读: 在同一个事务里, SELECT的结果是事务开始时时间点的状态, 因此, 同样的SELECT操作读到的结果会是一致的.但是, 会有幻读现象
    4. 串行化: 最高的隔离级别, 在这个隔离级别下, 不会产生任何异常.并发的事务, 就像事务是在一个个按照顺序执行一样






