---
title: PHP_基础 (38)
date: 2020-02-28
tags: PHP 
toc: true
---

### PHP原理-数组底层实现原理
    平时用数组用挺多的, 就是没有考虑过底层实现原理, 趁现在有时间就看看

<!-- more -->

#### PHP数组底层数据结构
> 数组底层基于散列表实现
- 最重要的成员Bucket
    * Bucket主要用来保存元素的key和value, 以及一个整型的h(散列值, 或者叫哈希值): 如果元素是数值索引, 则其值就是数值索引的值；如果是字符串索引, 那么其值就是 key 通过 Time33 算法计算得到的散列值, h 的值用来最终映射元素的存储位置

#### PHP数组的基本实现
> 散列表主要由两部分组成: 存储元素数组、散列函数
- 数组有序性实现原理
    * 为了实现 PHP 数组的有序性, PHP 底层的散列表在散列函数与元素数组之间加了一层映射表, 这个映射表也是一个数组, 大小和存储元素的数组相同, 存储元素的类型为整型, 用于保存元素在实际存储的有序数组中的下标 —— 元素按照先后顺序依次插入实际存储数组, 然后将其数组下标按照散列函数散列出来的位置存储在新加的映射表中
![PHP数组底层](/img/20200228_1.png)


