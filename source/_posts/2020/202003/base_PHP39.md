---
title: PHP_基础 (39)
date: 2020-03-02
tags: PHP 
toc: true
---

### PHP异常处理机制
    什么? 你还在用if else去判断异常?
    又是被问傻的一天

<!-- more -->

#### 异常
> 异常是 Exception 类的对象, 在遇到无法修复的状况时抛出(例如, 远程 API 无响应, 数据库查询失败等), 我们称这些状况为异常状况
- 抛出异常
    * 实例化时可以把异常赋值给变量, 不过一定要把异常抛出
    * 抛出异常后代码会立即停止执行, 后续的 PHP 代码都不会运行, 抛出异常的方式是使用 throw 关键字, 后面紧跟着要抛出的 Exception 实例
- 捕获异常
    * 我们应该捕获抛出的异常, 然后进行相应的处理, 尤其是使用第三方编写的 PHP 组件和框架时更要做好防范
    * 拦截并处理潜在异常的方式是把可能抛出异常的代码放在 try/catch 语句块中


#### 异常处理程序
> set_exception_handler() 函数设置用户自定义的异常处理函数.该函数用于创建运行期间的用户自己的异常处理方法.该函数返回旧的异常处理程序, 如果失败则返回 NULL.

#### 错误
> 在开发环境中, 我们倾向于让 PHP 显示并记录所有错误信息, 而在生产环境中我们会让 PHP 记录大部分错误信息, 但不显示出来, 不论如何, 一定要遵守以下规则: 1. 一定要让 PHP 报告错误; 2. 在开发环境中要显示错误; 3. 在生产环境中不能显示错误; 4. 在开发环境和生成环境中都要记录错误





