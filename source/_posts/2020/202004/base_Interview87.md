---
title: Interview_总结 (87)
date: 2020-04-01
tags: Interview
toc: true
---

### 面试题
    今日被问傻系列-数据库主从不一致怎么解

<!-- more -->

#### 常见的数据库集群架构如何
> 加从库的初衷是提升读性能
- A
    * 一主多从,主从同步,读写分离
    * 一个主库提供写服务
    * 多个从库提供读服务,可以增加从库提升读性能
    * 主从之间同步数据
    ![主从示意图](/img/20200401_1.png)

#### 为什么会出现不一致
> 任何数据冗余,必将引发一致性问题
- A
    * 服务发起了一个写请求
    * 服务又发起了一个读请求,此时同步未完成,读到一个不一致的脏数据
    * 数据库主从同步最后才完成
    ![主从延迟示意图](/img/20200401_2.png)

#### 如何避免这种主从延时导致的不一致
- A
    * 忽略 : 如果业务能够接受,别把系统架构搞得太复杂
    * 强制读主 : 高可用主库,用缓存提高读性能
    * 选择性读主 : 在cache里记录哪些记录发生过写请求,来路由读主还是读从





