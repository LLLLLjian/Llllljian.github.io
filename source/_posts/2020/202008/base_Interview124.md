---
title: Interview_总结 (124)
date: 2020-08-26
tags: 
    - HTTP
    - Interview
toc: true
---

### 你到底对称不对称
    今日被问傻系列-我的心里为啥没加密

<!-- more -->

#### 对称加密
> 对称加密,顾名思义,加密方与解密方使用同一钥匙(密钥).具体一些就是,发送方通过使用相应的加密算法和密钥,对将要发送的信息进行加密；对于接收方而言,使用解密算法和相同的密钥解锁信息,从而有能力理解对方的信息
1. 加密方和解密方使用同一个密钥.
2. 加密解密的速度比较快,适合数据比较长时的使用.
3. 密钥传输的过程不安全,且容易被破解,密钥管理也比较麻烦
- 常见的对称加密算法
    * DES: 数据加密标准,速度较快,适用于加密大量数据的场合
    * IDEA
    * AES: 级加密标准,是下一代的加密算法标准,速度快,安全级别高
    * SM1和SM4

#### 非对称加密
> 在对称加密中,发送方与接收方使用相同的密钥.那么在非对称加密中则是发送方与接收方使用的不同的密钥.其主要解决的问题是防止在秘钥协商的过程中发生泄漏.比如在对称加密中,小蓝将需要发送的消息加密,然后告诉你密码是123balala,ok,对于其他人而言,很容易就能劫持到密码是123balala.那么在非对称的情况下,小蓝告诉所有人密码是123balala,对于中间人而言,拿到也没用,因为没有私钥.所以,非对称密钥其实主要解决了密钥分发的难题
1. 每个用户拥用一对密钥加密: 公钥和私钥
2. 公钥加密,私钥解密；私钥加密,公钥解密
3. 公钥传输的过程不安全,易被窃取和替换
4. 由于公钥使用的密钥长度非常长,所以公钥加密速度非常慢,一般不使用其去加密
5. 某一个用户用其私钥加密,其他用户用其公钥解密,实现数字签名的作用
6. 公钥加密的另一个作用是实现密钥交换
- 常见的非对称加密算法
    * RSA: 由 RSA 公司发明,是一个支持变长密钥的公共密钥算法,需要加密的文件块的长度也是可变的
    * ECC: 椭圆曲线密码编码学
    * SM2
- 通常使用的方式
    * 采用非对称加密算法管理对称算法的密钥,然后用对称加密算法加密数据,这样我们就集成了两类加密算法的优点,既实现了加密速度快的优点,又实现了安全方便管理密钥的优点.

#### 散列算法
> 散列是信息的提炼,通常其长度要比信息小得多,且为一个固定长度.加密性强的散列一定是不可逆的,这就意味着通过散列结果,无法推出任何部分的原始信息.任何输入信息的变化,哪怕仅一位,都将导致散列结果的明显变化,这称之为雪崩效应.散列还应该是防冲突的,即找不出具有相同散列结果的两条信息.具有这些特性的散列结果就可以用于验证信息是否被修改.
- 常见的散列
    * MD5
    * SHA
    * SM3

#### 听我讲个故事
> 用一个故事讲完https
1. 演职员表
    * 小L, 住在A镇的美男子
    * 小N,住在B镇的奇女子
    * 小S, 这是个喜欢小L也喜欢小N的奇人
2. 剧情简介
    * 小L和小N在一个偶然的机会认识了, 然后两个人越聊越投机,天南地北,海阔天空,还夹杂着不少隐私的话题, 最后他们聊完了, 全剧终.
3. 分集剧情
    1. 总是有一种被偷看的感觉
        * 有一天小L突然意识到, 咱俩说话就明文的呀, 这简直就是网络上裸奔啊, 任何一个不怀好意的家伙都可以监听我们通信,打开我们发送的数据包,窥探我们的隐私啊
        * 小N很生气, 那你不早点说,我刚才是不是把我的微信号给你发过去了？ 我是不是告诉你我上周去哪儿旅游了?   估计已经被人截取了吧！
        * 小L说 那我想到了 咱们约定一个密码, 以后咱们的消息都通过密码加密之后再发送把, 这样就不怕别人偷看了
        * 小N说 那我每根一个朋友说话都得约定个密码, 而且密码也不安全呀, 万一被人拿走了还是不行
        * 他们像过了热恋期, 话少了很多
    2. 转机出现
        * 小L说 我听说有个非对称加密的方法,  双方必须协商一个保密的密钥, 而是有一对儿钥匙, 一个是保密的,称为私钥,另外一个是公开的,称为公钥,更有意思的是,用私钥加密的数据,只有对应的公钥才能解密,用公钥加密的数据, 只有对应的私钥才能解密.
        * 小N说 好呀, 以后你跟我说话 就用我的公钥加密, 我用我的私钥解密, 我跟你说话 我就用你的公钥加密, 你用你的私钥解密, 这样就不用怕被人偷窥了
        * 又重新进入热恋期,  话又多了
    3. 解决小问题
        * 小N发现 他们最近说话有点少, 不是因为没有话题聊, 而是因为用非对称加密的方式太慢了, 早上有高兴的事值得分享的时候, 经过一个来回的加密解密, 高兴劲已经过去了, 一天也过去了
        * 小L决定改变这种情况, 他决定先用非对称加密将一个密码加密, 然后传给小N, 待小N解密成功之后,他们就用密码进行加密解密, 速度又快起来了
    4. 潜在的第三者出现了
        * 小L突然发现 最近小N的说话方式越来越奇怪, 越来越不像他了, 知道他们见面的时候 确认了一下公钥和私钥的时候才发现了小S的存在
        * 小L一直以为自己拿到的是小N的公钥, 其实根本不是, 他拿的是小S的公钥, 就这样, 小L说的话全被小S看了一遍, 更可怕的是 小N的公钥也在小S手里, 小S又模仿小L的说话语气, 通过小N的公钥加密消息之后发给小N, 当一个中间人
    5. 你到底是谁
        * 小L当然不愿意这样被人监视了, 他想到了解决的方法, 小L先将消息hash一下, 然后用自己的私钥把hash结果加密, 加密成功之后连同消息一起发出去, 如果小N手里的公钥是小L的, 那么他就可以通过消息摘要来判断这个消息是不是小L发出的, 因为小L的私钥只会在自己手里, 就算小S截取到了小L的公钥, 他也不能生成一样的消息摘要
    6. 第三者的反扑
        * 小S发现自己不能修改小L的消息之后也很生气,他决定给小L一个教训,小S要把整个原始信息都替换掉, 生成一个新的消息摘要, 你还是区分不出来呀, 而且他还替换掉了小N手中小L的公钥
    7. 大结局
        * 小L要放大招了, 他先是把自己的公钥和自己的信息生成了一个消息摘要, 他还用CA(公证处)的公钥生成了一个数字签名, 把原始信息和数字签名组合成一个数字证书一块发给了小N
        * 小N拿上数字证书之后先解开数字签名得到了一个消息摘要, 再把公钥hash成一个消息摘要去对比是不是一个, 是一个的话就证明是小L的公钥了

