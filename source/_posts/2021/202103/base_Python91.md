---
title: Python_基础 (91)
date: 2021-03-22
tags: Python
toc: true
---

### 快来跟我一起学Python
    哈哈哈 之前学的栗子都是水过地皮湿 还是学项目吧！！
    python之变量赋值传递时的引用和拷贝

<!-- more -->

#### 问题描述
> 先说说我遇到的问题, 因为之前写PHP写习惯了, 变量赋值的使用和python是不一样的, 记录一下

#### PHP变量赋值
- eg
    ```php
        <?php
        $dict = array(
            'a' => array(1, 2, 3, 4, 5),
            'b' => 2
        );
        $x = $dict['a'];
        for($i=0;$i<5;$i++) {
            $x[$i] = 0;
        }
        var_dump($dict["a"]);
        # out: array(5) { [0]=> int(1) [1]=> int(2) [2]=> int(3) [3]=> int(4) [4]=> int(5) }
        ?>
    ```

#### Python变量赋值
- eg
    ```python
        dict = {'a':[1,2,3,4,5],'b':2}
        x = dict['a']
        for i in range(5):
            x[i] = 0
        print(dict['a'])
        # out: [0, 0, 0, 0, 0]
        x = dict['b']
        x += 3
        print(x)
        # out: 5
        print(dict["b"])
        # out 2
    ```

#### 那么问题来了
> 变量赋值传递时什么情况下是传值(拷贝),什么情况下是传址(引用)呢
- 直接拷贝
    * 浅拷贝(copy): 拷贝父对象,不会拷贝对象的内部的子对象
        * eg
            ```python
                >>>a = {1: [1,2,3]}
                >>> b = a.copy()
                >>> a, b
                ({1: [1, 2, 3]}, {1: [1, 2, 3]})
                >>> a[1].append(4)
                >>> a, b
                ({1: [1, 2, 3, 4]}, {1: [1, 2, 3, 4]})
            ```
        * img
            ![浅拷贝](/img/20210322_1.png)
    * 深拷贝(deepcopy):  copy 模块的 deepcopy 方法,完全拷贝了父对象及其子对象
        * eg
            ```python
                >>>import copy
                >>> c = copy.deepcopy(a)
                >>> a, c
                ({1: [1, 2, 3, 4]}, {1: [1, 2, 3, 4]})
                >>> a[1].append(5)
                >>> a, c
                ({1: [1, 2, 3, 4, 5]}, {1: [1, 2, 3, 4]})
            ```
        * img
            ![浅拷贝](/img/20210322_2.png)
- 传递规则
    * Python 赋值过程中不明确区分拷贝和引用,一般对静态变量的传递为拷贝,对动态变量的传递为引用.(注,对静态变量首次传递时也是引用,当需要修改静态变量时,因为静态变量不能改变,所以需要生成一个新的空间存储数据)
    * 字符串,数值,元组均为静态变量
    * 列表,字典为动态变量.


