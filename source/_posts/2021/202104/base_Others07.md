---
title: 杂项_总结 (07)
date: 2021-04-14
tags: Others
toc: true
---

### 查缺补漏
    短链接

<!-- more -->

#### 什么是短链接
> 就是把普通网址, 转换成比较短的网址.比如：http://t.cn/RlB2PdD 这种, 在微博这些限制字数的应用里.好处不言而喻.短、字符少、美观、便于发布、传播.

#### 短链接好处
1. 链接变短, 在对内容长度有限制的平台发文, 可编辑的文字就变多了
2. 我们经常需要将链接转成二维码的形式分享给他人, 如果是长链的话二维码密集难识别, 短链就不存在这个问题了
3. 链接太长在有些平台上无法自动识别为超链接

#### 原理解析
1. 当我们在浏览器里输入http://t.cn/RlB2PdD时
2. DNS首先解析获得 http://t.cn 的 IP 地址
3. 当DNS获得IP地址以后(比如：74.125.225.72), 会向这个地址发送 HTTP GET 请求, 查询短码 RlB2PdD
4. http://t.cn 服务器会通过短码 RlB2PdD 获取对应的长 URL
5. 请求通过 HTTP 302 转到对应的长 URL https://m.helijia.com .
    * 301, 代表 永久重定向, 也就是说第一次请求拿到长链接后, 下次浏览器再去请求短链的话, 不会向短网址服务器请求了, 而是直接从浏览器的缓存里拿, 这样在 server 层面就无法获取到短网址的点击数了, 如果这个链接刚好是某个活动的链接, 也就无法分析此活动的效果.所以我们一般不采用 301
    * 302, 代表 临时重定向, 也就是说每次去请求短链都会去请求短网址服务器(除非响应中用 Cache-Control 或 Expired 暗示浏览器缓存),这样就便于 server 统计点击数, 所以虽然用 302 会给 server 增加一点压力, 但在数据异常重要的今天, 这点代码是值得的, 所以推荐使用 302

#### 实现核心
> 发号器(ID自增)+62进制编码
1. 为什么要用62进制转换？64进制转换倒是听得多了
    * 62进制转换是因为62进制转换后只含数字+小写+大写字母.而64进制转换会含有/,+这样的符号(不符合正常URL的字符)
    * 10进制转62进制可以缩短字符, 如果我们要6位字符的话, 已经有560亿个组合了.
