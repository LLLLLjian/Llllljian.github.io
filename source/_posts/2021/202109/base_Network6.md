---
title: network_基础 (6)
date: 2021-09-18
tags: Network
toc: true
---

### 网络相关(2)--HTTP协议
    网络相关(2)-- HTTP协议

<!-- more -->

#### 引子

![HTTP协议](/img/20210918_1.png)

##### Application
> HTTP请求结构: 请求方式 + 请求URI + 协议及其版本
  HTTP响应结构: 状态码 + 原因短语 + 协议及其版本

##### 各种协议与HTTP协议之间的关系

![各种协议与HTTP协议之间的关系](/img/20210918_1.png)

##### HTTP长连接、短连接
1. 长连接只需要建立一次TCP 连接就能进行多次 HTTP 通信.
2. 从 HTTP/1.1 开始默认是长连接的, 如果要断开连接, 需要由客户端或者服务器端提出断开, 使用 Connection : close
3. 在 HTTP/1.1 之前默认是短连接的, 如果需要使用长连接, 则使用 Connection : Keep-Alive

##### Http和Https的区别
1. HTTP 有以下安全性问题: 窃听风险: 使用明文进行通信, 内容可能会被窃听；冒充风险: 不验证通信方的身份, 通信方的身份有可能遭遇伪装；篡改风险: 无法证明报文的完整性, 报文有可能遭篡改.
2. HTTPs 并不是新协议, 而是让 HTTP 先和 SSL(Secure Sockets Layer)通信, 再由 SSL 和 TCP 通信, 也就是说HTTPs 使用了隧道进行通信.SSL/TLS协议就是为了解决这些风险而设计, 希望达到: 所有信息加密传输, 防止三方窃听通信内容；具有校验机制, 内容一旦被篡改, 通信双方立刻会发现；配备身份证书, 防止身份被冒充.通过使用SSL, HTTPs 具有了加密(防窃听)、认证(防伪装)和完整性保护(防篡改)
3. 二者之间存在如下不同
    * 端口不同: Http与Http使用不同的连接方式, 用的端口也不一样, 前者是80, 后者是443；
    * 资源消耗: 和HTTP通信相比, Https通信会由于加减密处理消耗更多的CPU和内存资源；
    * 开销: Https通信需要证书, 而证书一般需要向认证机构购买；
    * Http协议建立连接的过程比Https协议快.因为Https除了TCP三次握手, 还要经过SSL握手.连接建立之后的数据传输速度, 二者无明显区别.
    * Http连接是无状态的, 而Https采用Http+SSL构建可进行加密传输、身份认证的网络协议, 更安全.

##### HTTPs的加密方式
> Https的加密机制是一种共享密钥加密和公开密钥加密并用的混合加密机制.也即使用非对称密钥加密用于传输对称密钥来保证传输过程的安全性, 之后使用对称密钥加密进行通信来保证通信过程的效率
- 客户端在浏览器中输入一个https网址, 然后连接到server的443端口, 采用https协议的server必须有一套数字证书(一套公钥和密钥), 首先server将证书(公钥)传送到客户端, 客户端解析证书, 验证成功, 则生成一个随机数(私钥), 并用证书将该随机数加密后传回server, server用密钥解密后, 获得这个随机值, 然后将要传输的信息和私钥通过某种算法混合在一起(加密)传到客户端, 客户端用之前的生成的随机数(私钥)解密服务器端传来的信息

