---
title: 杂项_总结 (15)
date: 2021-09-13
tags: Others
toc: true
---

### 杂项
    大型分布式Web系统的架构演进

<!-- more -->

#### 大型分布式Web系统的架构演进
> 系统具备的功能: 用户模块: 用户注册和管理; 商品模块: 商品展示和管理; 交易模块: 创建交易和管理

- 阶段1 单机构建网站
    * 项目初期, 所有的应用都运行在一台机器上
    ![阶段1](/img/20210913_1.png)
- 阶段2 应用服务器与数据库分离
    * 随着网站的上线, 访问量逐步上升, 服务器的负载慢慢提高, 在服务器还没有超载的时候, 我们应该就要做好准备, 提升网站的负载能力.假如我们代码层面 已难以优化, 在不提高单台机器的性能的情况下, 采用增加机器是一个不错的方式, 不仅可以有效地提高系统的负载能力, 而且性价比高. 增加的机器用来做什么呢？此时我们可以把数据库服务器和Web服务器拆分开来, 这样不仅提高了单台机器的负载能力, 也提高了容灾能力
    ![阶段2](/img/20210913_2.png)
- 阶段3 应用服务器集群
    * 随着访问量继续增加, 单台应用服务器已经无法满足需求了.在假设数据库服务器没有压力的情况下, 我们可以把应用服务器从一台变成了两台甚至多台 , 把用户的请求分散到不同的服务器中, 从而提高负载能力.而多台应用服务器之间没有直接的交互, 他们都是依赖数据库各自对外提供服务
    ![阶段3](/img/20210913_3.png)
- 阶段4 数据库读写分离化
    * 随着访问量的的提高, 数据库的负载也在慢慢增大, 就想到了数据库主从复制、读写分离
    ![阶段4](/img/20210913_4.png)
- 阶段5 用搜索引擎缓解读库的压力
    * 数据库做读库的话, 常常对模糊查找 力不从心, 即使做了读写分离, 这个问题还未能解决.以我们所举的交易网站为例, 发布的商品存储在数据库中, 用户最常使用的功能就是查找商品, 尤其是根据商品的标题来查找对应的商品.对于这种需求, 一般我们都是通过 like 功能来实现的, 但是这种方式的代价非常大, 而且结果非常不准确.此时我们可以使用 搜索引擎 的 倒排索引 来完成
    ![阶段5](/img/20210913_5.png)
- 阶段6 用缓存缓解读库的压力
    * 随着访问量的增加, 逐渐出现了许多用户访问同一部分 热门内容 的情况, 对于这些比较热门的内容, 没必要每次都从数据库读取.我们可以使用缓存技术,常用的缓存机制包括页面级缓存、应用数据缓存和数据库缓存
    ![阶段6](/img/20210913_6.png)
- 阶段7 数据库水平拆分与垂直拆分
    * 我们的网站演进到现在, 交易、商品、用户的数据都还在同一个数据库中.尽管采取了增加 缓存 和 读写分离 的方式, 但随着数据库的压力继续增加, 数据库数据量的 瓶颈 越来越突出, 此时, 我们可以有数据 垂直拆分 和 水平拆分 两种选择
    ![阶段7](/img/20210913_7.png)
- 阶段8 应用的拆分
    * 随着业务的发展, 业务越来越多, 应用越来越大.我们需要考虑如何避免让应用越来越臃肿.这就需要把应用拆开, 从一个应用变为俩个甚至更多
    ![阶段8](/img/20210913_8.png)
- 阶段9 引入消息中间件
    * 随着网站的继续发展, 的系统中可能出现 不同语言 开发的子模块和部署在不同平台的子系统.此时我们需要一个平台来传递可靠的, 与平台和语言无关的数据, 并且能够把 负载均衡透明化 , 能在调用过程中 收集 并 分析 调用数据, 推测出 网站的访问增长率 等等一系列需求, 对于网站应该如何成长做出预测
    ![阶段9](/img/20210913_9.png)














