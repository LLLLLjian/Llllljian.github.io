---
title: Python_基础 (127)
date: 2021-12-29
tags: Python
toc: true
---

### python切片
    切片我会的太基础了, 多看一点吧

<!-- more -->

#### Python可切片对象的索引方式

![python索引方式](/img/20211229_1.png)

#### Python切片操作的一般方式
> 一个完整的切片表达式包含两个“:”, 用于分隔三个参数(start_index、end_index、step).当只有一个“:”时, 默认第三个参数step=1；当一个“:”也没有时, start_index=end_index, 表示切取start_index指定的那个元素.
- eg
    ```
        切片操作基本表达式：object[start_index:end_index:step]
    ```
- start_index
    * 表示起始索引(包含该索引对应值)；该参数省略时, 表示从对象“端点”开始取值, 至于是从“起点”还是从“终点”开始, 则由step参数的正负决定, step为正从“起点”开始, 为负从“终点”开始
- end_index
    * 表示终止索引(不包含该索引对应值)；该参数省略时, 表示一直取到数据“端点”, 至于是到“起点”还是到“终点”, 同样由step参数的正负决定, step为正时直到“终点”, 为负时直到“起点”
- step
    * 正负数均可, 其绝对值大小决定了切取数据时的‘‘步长”, 而正负号决定了“切取方向”, 正表示“从左往右”取值, 负表示“从右往左”取值.当step省略时, 默认为1, 即从左往右以步长1取值.“切取方向非常重要！”

#### Python切片操作详细例子
- demo
    ```python
        >>>a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
    ```
- 切取单个元素
    ```python
        >>>a[0]
        >>>0
        >>>a[-4]
        >>>6
    ```
- 切取完整对象
    ```python
        >>>a[:] #从左往右
        >>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
        >>>a[::]#从左往右
        >>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
        >>>a[::-1]#从右往左
        >>> [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
    ```
- start_index和end_index全为正(+)索引的情况
    ```python
        # step=1, 从左往右取值, start_index=1到end_index=6同样表示从左往右取值.
        >>>a[1:6]
        >>> [1, 2, 3, 4, 5]
        # step=-1, 决定了从右往左取值, 而start_index=1到end_index=6决定了从左往右取值, 两者矛盾, 所以为空
        >>>a[1:6:-1]
        >>> []
        # step=1, 决定了从左往右取值, 而start_index=6到end_index=2决定了从右往左取值, 两者矛盾, 所以为空
        >>>a[6:2]
        >>> []
        # step=1, 表示从左往右取值, 而start_index省略时, 表示从端点开始, 因此这里的端点是“起点”, 即从“起点”值0开始一直取到end_index=6(该点不包括)
        >>>a[:6]
        >>> [0, 1, 2, 3, 4, 5]
        # step=-1, 从右往左取值, 而start_index省略时, 表示从端点开始, 因此这里的端点是“终点”, 即从“终点”值9开始一直取到end_index=6(该点不包括)
        >>>a[:6:-1]
        >>> [9, 8, 7]
        # step=1, 从左往右取值, 从start_index=6开始, 一直取到“终点”值9
        >>>a[6:]
        >>> [6, 7, 8, 9]
        # step=-1, 从右往左取值, 从start_index=6开始, 一直取到“起点”0
        >>>a[6::-1]
        >>> [6, 5, 4, 3, 2, 1, 0]
    ```
- start_index和end_index全为负(-)索引的情况
    ```python
        # step=1, 从左往右取值, 而start_index=-1到end_index=-6决定了从右往左取值, 两者矛盾, 所以为空
        >>>a[-1:-6]
        >>> []
        # step=-1, 从右往左取值, start_index=-1到end_index=-6同样是从右往左取值
        >>>a[-1:-6:-1]
        >>> [9, 8, 7, 6, 5]
        # step=1, 从左往右取值, 而start_index=-6到end_index=-1同样是从左往右取值
        >>>a[-6:-1]
        >>> [4, 5, 6, 7, 8]
        # step=1, 从左往右取值, 从“起点”开始一直取到end_index=-6(该点不包括)
        >>>a[:-6]
        >>> [0, 1, 2, 3]
        # step=-1, 从右往左取值, 从“终点”开始一直取到end_index=-6(该点不包括)
        >>>a[:-6:-1]
        >>> [9, 8, 7, 6, 5]
        # step=1, 从左往右取值, 从start_index=-6开始, 一直取到“终点”
        >>>a[-6:]
        >>> [4, 5, 6, 7, 8, 9]
        # step=-1, 从右往左取值, 从start_index=-6开始, 一直取到“起点”
        >>>a[-6::-1]
        >>> [4, 3, 2, 1, 0]
    ```
- start_index和end_index正(+)负(-)混合索引的情况
    ```python
        # start_index=1在end_index=-6的左边, 因此从左往右取值, 而step=1同样决定了从左往右取值, 因此结果正确
        >>>a[1:-6]
        >>> [1, 2, 3]
        # start_index=1在end_index=-6的左边, 因此从左往右取值, 但step=-则决定了从右往左取值, 两者矛盾, 因此为空
        >>>a[1:-6:-1]
        >>> []
        # start_index=-1在end_index=6的右边, 因此从右往左取值, 但step=1则决定了从左往右取值, 两者矛盾, 因此为空
        >>>a[-1:6]
        >>> []
        # start_index=-1在end_index=6的右边, 因此从右往左取值, 而step=-1同样决定了从右往左取值, 因此结果正确
        >>>a[-1:6:-1]
        >>> [9, 8, 7]
    ```
- 多层切片操作
    ```python
        >>>a[:8][2:5][-1:]
        >>> [4]
        相当于：
        a[:8]=[0, 1, 2, 3, 4, 5, 6, 7]
        a[:8][2:5]= [2, 3, 4]
        a[:8][2:5][-1:] = [4]
        理论上可无限次多层切片操作, 只要上一次返回的是非空可切片对象即可.
    ```
- 切片操作的三个参数可以用表达式
    ```python
        >>>a[2+1:3*2:7%3]
        >>> [3, 4, 5]
        即：a[2+1:3*2:7%3] = a[3:6:1]
    ```
- 其他对象的切片操作
    ```python
        # 元组
        >>> (0, 1, 2, 3, 4, 5)[:3]
        >>> (0, 1, 2)
        # 字符串
        >>>'ABCDEFG'[::2]
        >>>'ACEG'
        # 利用range()函数生成1-99的整数, 然后从start_index=2(即3)开始以step=3取值, 直到终点, 再在新序列中取最后五个数.
        >>>for i in range(1,100)[2::3][-5:]: 
                print(i)
        >>>87
        90
        93
        96
        99
    ```

#### 常用切片操作
- 取偶数位置
    ```python
        >>>b = a[::2]
        [0, 2, 4, 6, 8]
    ```
- 取奇数位置
    ```python
        >>>b = a[1::2]
        [1, 3, 5, 7, 9]
    ```
- 拷贝整个对象
    ```python
        >>>b = a[:] #
        >>>print(b) #[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
        >>>print(id(a)) #41946376
        >>>print(id(b)) #41921864
        或
        >>>b = a.copy()
        >>>print(b) #[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
        >>>print(id(a)) #39783752
        >>>print(id(b)) #39759176
    ```
- 在某个位置插入元素
    ```python
        >>>a[3:3] = ['A','B','C']
        [0, 1, 2, 'A', 'B', 'C', 3, 4, 5, 6, 7, 8, 9]
        >>>a[0:0] = ['A','B']
        ['A', 'B', 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
    ```
- 替换一部分元素
    ```python
        >>>a[3:6] = ['A','B']
        [0, 1, 2, 'A', 'B', 6, 7, 8, 9]
    ```






